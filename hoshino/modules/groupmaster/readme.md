# 带拉黑功能的anti_abuse

这份修改过的```anti_abuse.py```添加了拉黑群成员与群的功能，希望在HoshinoBot开发者完善反滥用机制之前提供临时解决方案

## 部署

将```anti_abuse.py```放入```hoshino/modules/groupmaster```中覆盖原文件（建议备份原文件）

## 用法

### 命令

以下命令均需机器人管理员在群聊里使用。<参数>[参数]分别为必选、可选参数。参数[时间]的格式会在列表后说明。

- 拉黑用户 [时间] <@QQ (可多个)>  ：拉黑一个或多个用户
- 拉黑本群 [时间]  ：拉黑本群
- 取消拉黑用户 <@QQ (可多个)>  ：取消拉黑一个或多个用户
- 取消拉黑本群  ：取消拉黑本群

如果不注明时间，则默认为8小时。

### 时间参数说明

如果注明时间参数，则它**必须是第一个参数**。它的格式为"XX小时XX分钟XX秒"，其中“小时”“分钟”不能简写为“时”“分”。

### 示例

以下是部分命令示例：

- 拉黑用户 @123456 @233666
- 拉黑用户3小时20分钟 @123456 @233666
- 拉黑本群3小时20分钟
- 拉黑本群
- 取消拉黑用户 @123456 @233666
- 取消拉黑本群

## 已知问题

本项目会出现以下一些不符合预期的情况：

1. 所有以```on_command```声明的命令仍会做出响应，例如询问机器人“在吗”；
2. 机器人拉黑一个群后，机器人管理员在这个群里发的命令也不会被响应，必须发送“取消本群拉黑”取消后才能继续操作；
3. 所有的拉黑名单储存在内存中，重启机器人后会丢失；

本项目未经充分测试，希望发现bug的使用者提交issue。非常感谢。

## 开源

本项目以GPL-v3协议开源。[项目地址](https://github.com/iamwyh2019/customize-HoshinoBot/tree/master/hoshino/modules/groupmaster)